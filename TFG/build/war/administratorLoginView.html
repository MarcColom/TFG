<!doctype html>

<html lang="es" ng-app="app">
  
  <head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">   
   <title>SegurosyViajes</title>   
   <link href="bootstrap-3.3.4/css/bootstrap.min.css" rel="stylesheet">
   <link href="css/index.css" rel="stylesheet">
  </head>
  
  <body>
  
  <div class="row top-buffer">  	
  	<div class="col-md-6">
  		<br>
  		<br>
  		<h1> Administrador </h1>
  	</div>	 
  	<div class="col-md-6">
  		<img src="./images/logo_blau_mini.png" class="img-responsive" alt="Responsive image">
  	</div>
  	<legend></legend>
  </div>  
  
  	    	  
	  <div class="row top-buffer">	
	  <div class="col-md-2"> </div>	
	  <div class="col-md-2"> </div>
	  <div class="col-md-8">
	    
  			<form class="form-inline" name="loginForm" ng-submit="loginForm.$valid && adminCtrl.login()" novalidate>	
				<fieldset> 
				<div class="well well-lg">  				
 	 				<div class="form-group">
  						<label>Usuario:</label>
  						<input class="form-control" ng-model="adminCtrl.user" type="text"  required/>
					</div>	  	 	
					<div class="form-group">
  						<label>Contrasenya:</label>
  						<input class="form-control" ng-model="adminCtrl.password" type="text" required/>
					</div>
			<input type="submit" value="Buscar" class="btn btn-info"/>	
				</div>
				</fieldset>
			</form>			
		
			
			<div class="alert alert-dismissible alert-danger" ng-show="adminCtrl.isError">
		  		<h4> Error: </h4>  			
		  			<strong>El nombre de usuario o contrasenya son incorrectos</strong>	  			
					<br><strong>Revisa los datos introducidos</strong>											
		  			<br>	  		
		 	</div> 	
   	  </div>
	  </div>	
   	
  
   <div class="row top-buffer">  
      
   <div class="col-md-12" ng-show="adminCtrl.isLogin">	
   			<div class="row top-buffer"> 
			<fieldset>
			<div class="col-md-5">   					
 			<form class="form-inline" name="findCodeAdminForm" ng-submit="findCodeAdminForm.$valid && adminCtrl.filterCodeOrders()" novalidate>				
 	 				<div class="well well-lg">
 	 				<div class="form-group"> 	 		
  						<label>Código:</label>
  						<input class="form-control" ng-model="adminCtrl.code" type="number" placeholder="Código de compra" required/>
  						<input type="submit" value="Buscar" class="btn btn-info"/>
					</div>
					</div>		
			</form>
			</div>
			<div class="col-md-2"></div>
			<div class="col-md-5">
			<form class="form-inline" name="findEmailAdminForm" ng-submit="findEmailAdminForm.$valid && adminCtrl.filterEmailOrders()" novalidate>			
					<div class="well well-lg">									 			  	 	
					<div class="form-group">
  						<label>Email:</label>
  						<input class="form-control" ng-model="adminCtrl.email" type="email" placeholder="Email del comprador" required/>
  						<input type="submit" value="Buscar" class="btn btn-info"/>
					</div>
					</div>					
			</form>	
			</div>				
			</fieldset>
			</div>
				
			<form class="form-inline" name="findDateAdminForm" ng-submit="findDateAdminForm.$valid && adminCtrl.filterDateOrders()" novalidate>		
				<fieldset>
					<div class="well well-lg"> 
					<div class="row top-buffer"> 
					<div class="col-md-2">					  						
  						<label>Fecha de Compra:</label>
  					</div>
  					<div class="col-md-6">
  						<div class="form-group">	
  						<label>Desde: </label>
  						<input class="form-control" ng-model="adminCtrl.from" type="date" placeholder="Desde" required/>
  						</div>  					  					
  						<label>Hasta:</label>
  						<input class="form-control" ng-model="adminCtrl.to" type="date" min="{{adminCtrl.from}}" placeholder="Hasta" required/>
  					</div>	
  					<div class="col-md-2">
  						<input type="submit" value="Buscar" class="btn btn-info"/>
  					</div>
  					</div>					
					</div>								
				</fieldset>
			</form>
		</div>
		</div>			
		
		
		<div class="alert alert-dismissible alert-danger" ng-show="adminCtrl.isNotFound">
	  		<h4> Error: </h4>	  				
	  			<strong>No se ha encontrado ningúna compra con estos datos</strong>	  			
				<br><strong>Revisa los datos introducidos</strong>						
	  			<br> 	  		
	  	</div> 			 	  					
		
		
		<div class="row top-buffer">
		<div class="col-md-12" ng-show="adminCtrl.isLogin">	
  	  	  				
		<table class="table table-striped table-hover">
			<h3> Lista de compras </h3>
  			<thead>
    			<tr class="info">
      			<th> </th>      			
      			<th>Código</th>
      			<th>Fecha Compra</th>
      			<th>Fecha Inicio</th>
      			<th>Fecha Fin</th>
      			<th>Destino</th>
      			<th>Paxs</th>
      			<th>Precio PVP</th>
      			<th>Precio Neto</th>
      			<th>Nombre</th>
      			<th>Apellidos</th>
      			<th>Email</th>
      			<th>Tel.<th>      			     			
    			</tr>
  			</thead>
  			<tbody>  			
  		
    			<tr ng-repeat="order in adminCtrl.orders | orderBy:'id'">
      			<td></td>      			
		      	<td>{{order.code}}</td>
		      	<td>{{order.orderDate  | date:'dd/MM/yyyy'}}</td>
		      	<td>{{order.initDate  | date:'dd/MM/yyyy'}}</td>
		      	<td>{{order.endDate  | date:'dd/MM/yyyy'}}</td>
		      	<td>{{order.destination}}</td>
		      	<td>{{order.personNum}}</td>
		      	<td>{{order.grossPrice}}</td>
		      	<td>{{order.netPrice}}</td>
		      	<td>{{order.customer.name.name}}</td>
		      	<td>{{order.customer.name.surnames}}</td>
		      	<td>{{order.customer.email}}</td>
		      	<td>{{order.customer.phone}}</td>
		        <td><a href="{{order.certificadoURL}}" target="_blank" class="btn btn-primary">Certificado</a></td>		      	
		    	</tr>
		      
		    
		    </tbody>
		 </table>		
		</div>
	</div>
		
			
	



  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="bootstrap-3.3.4/js/bootstrap.min.js"></script>  
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular-route.js"></script>
  <script type="text/javascript" src="AngularJS/angular.min.js"></script>
  <script type="text/javascript" src="AngularJS/angular-route.min.js"></script> 
  <script type="text/javascript" src="AngularJS/app.js"></script>
  
      
  </body>
</html>		